/*!
 * Chart.bands.js
 * Version: v0.5.1-rc
 *
 * Copyright 2016 BBC
 * Released under the MIT license
 * https://github.com/BBC/Chart.bands.js/blob/master/LICENSE.md
 */
!function(){function o(e,r,t){function a(l,i){if(!r[l]){if(!e[l]){var s="function"==typeof require&&require;if(!i&&s)return s(l,!0);if(n)return n(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[l]={exports:{}};e[l][0].call(f.exports,function(o){var r=e[l][1][o];return a(r?r:o)},f,f.exports,o,e,r,t)}return r[l].exports}for(var n="function"==typeof require&&require,l=0;l<t.length;l++)a(t[l]);return a}return o}()({1:[function(o,e,r){},{}],2:[function(o,e,r){function t(o,e,r,t){var i=e.getPixelForValue(t.yValue),s=t.bandLine,c=8,f=0,d=r.start+f,u=r.stop+f,h="dashed"===s.type?n:l;h(o,i+s.stroke/4,d,u,s.stroke,s.colour,c),s.label&&a(o,r,t.bandLine,c,h)}function a(o,e,r,t,a){o.font=d.fontString(r.fontSize,r.fontStyle,r.fontFamily),o.fillStyle=r.fontColour||"black";var n=o.measureText(r.label).width,l=20,i="top"===r.yPos?e.top-2*r.fontSize-8:e.bottom+2*r.fontSize+8,s="left"===r.xPos?e.start+l:e.stop-n,c=i-.25*r.stroke,f=s-30;o.fillText(r.label,s,i),a(o,c,f,f+l,r.stroke,r.colour,t)}function n(o,e,r,t,a,n,i){for(var s=i||6,c=.666,f=s*c,d=s+f,u=r;u<t;u+=d){var h=u+i;l(o,e,u,h,a,n)}}function l(o,e,r,t,a,n){o.beginPath(),o.moveTo(r,e),o.lineTo(t,e),o.lineWidth=a,o.strokeStyle=n,o.stroke()}function i(o){return"object"==typeof o.belowThresholdColour&&o.belowThresholdColour.length>0&&"number"==typeof o.yValue}function s(o,e,r,t,a,n){var l=e.getPixelForValue(n),i=o.createLinearGradient(0,r,0,0),s=1-l/r;try{return i.addColorStop(0,a),i.addColorStop(s,a),i.addColorStop(s,t),i.addColorStop(1,t),i}catch(c){return console.warn("ConfigError: Chart.Bands.js had a problem applying one or more colors please check that you have selected valid color strings"),t}}function c(o){return u[o]?void(g=u[o]):(console.warn("Warning: The Chart.Bands.js plugin is not supported with chart type "+o),void(b=!1))}var f,d,u,h,b,g,p;f=o("Chart"),f="function"==typeof f?f:window.Chart,d=f.helpers,b=!0,g="borderColor",baseColor=[],u={bubble:"backgroundColor",line:"borderColor",lineWithHover:"borderColor"},h={borderColor:"backgroundColor",backgroundColor:"borderColor"},f.Bands=f.Bands||{},p=f.Bands.defaults={bands:{yValue:!1,bandLine:{stroke:.01,colour:"rgba(0, 0, 0, 1.000)",type:"solid",label:"",fontSize:"12",fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontStyle:"normal",xPos:"top",yPos:"left"},belowThresholdColour:["rgba(0, 255, 0, 1.000)"]}};var C=f.PluginBase.extend({beforeInit:function(o){c(o.config.type);for(var e=0;e<o.chart.config.data.datasets.length;e++)baseColor[e]=o.chart.config.data.datasets[e][g]},afterScaleUpdate:function(o){var e,r,t;if(b!==!1)if(e=o.chart.ctx.canvas,r=d.configMerge(f.Bands.defaults.bands,o.options.bands),i(r))for(var a=0;a<o.chart.config.data.datasets.length;a++)"string"==typeof baseColor[a]&&(t=s(e.getContext("2d"),o.scales["y-axis-0"],o.chart.height,baseColor[a],r.belowThresholdColour[a],r.yValue),o.chart.config.data.datasets[a][g]=t);else console.warn("ConfigError: The Chart.Bands.js config seems incorrect")},afterDraw:function(o){var e,r;b!==!1&&(e=o.chart.ctx.canvas,r=d.configMerge(f.Bands.defaults.bands,o.options.bands),"number"==typeof r.yValue?t(e.getContext("2d"),o.scales["y-axis-0"],{top:o.chartArea.top,bottom:o.boxes[2].bottom,start:o.chartArea.left,stop:o.chartArea.right},r):console.warn("ConfigError: The Chart.Bands.js plugin config requires a yValue"))}});f.pluginService.register(new C)},{Chart:1}]},{},[2]);